!function(r){"use strict";CherryJsCore.utilites.namespace("cherrySearch"),CherryJsCore.cherrySearch={settings:{searchFormWrapperClass:".cherry-search",searchFormClass:".cherry-search__form",inputClass:".cherry-search__field",submitClass:".cherry-search__submit",listClass:".cherry-search__results-list",itemClass:".cherry-search__results-item",messageHolder:".cherry-search__message",spinner:".cherry-search__spinner",moreButton:".cherry-search__more-button",searchHandlerId:"cherry_search_public_action"},init:function(){r("body").on("focus"+this.settings.searchFormWrapperClass,this.settings.inputClass,this.initCherrySearch.bind(this))},initCherrySearch:function(s){var e=r(s.target).closest(this.settings.searchFormWrapperClass);e.cherrySearch(this.settings)}},CherryJsCore.cherrySearch.init(),r.fn.cherrySearch=function(s){var e=this[0];if(e.isInit)return"is init: true";e.isInit=!0;var a=s,t=cherrySearchMessages,o=null,c=wp.template("search-form-results-item"),n=r(a.listClass,e),i=r(a.messageHolder,n),h=r(a.spinner,n);e.inputChangeHandler=function(s){var a=s.target.value;r("ul",n).html(""),e.outputMessage("",""),a?(e.showList(),h.addClass("show"),clearTimeout(o),o=setTimeout(function(){e.searchAjaxInstancer.sendData(a)},450)):e.hideList()},e.successCallback=function(s){if("error-notice"!==s.type){var a=s.data,o=a.error,l=a.message,u=a.posts,C=null,m="";if(0===a.post_count||o)e.outputMessage(l,"show");else{i.removeClass("show");for(C in u)m+="more_button"===C?u[C]:c(u[C])}h.removeClass("show"),r("ul",n).html(m)}else e.outputMessage(t.serverError,"error show")},e.errorCallback=function(){h.removeClass("show"),e.outputMessage(t.serverError,"error show")},e.hideList=function(){n.removeClass("show")},e.showList=function(){n.addClass("show")},e.focusHandler=function(){0!==r("ul > li",n).length&&e.showList()},e.outputMessage=function(r,s){i.removeClass("error show").addClass(s).html(r)},e.formClick=function(r){r.stopPropagation()},e.clickMoreButton=function(){r(a.searchFormClass,e).submit()},e.searchAjaxInstancer=new CherryJsCore.CherryAjaxHandler({handlerId:a.searchHandlerId,successCallback:e.successCallback,errorCallback:e.errorCallback}),r(a.inputClass,e).on("input",e.inputChangeHandler).on("focus",e.focusHandler),r(e).on("click"+a.searchFormWrapperClass,e.formClick).on("click"+a.searchFormWrapperClass,a.moreButton,e.clickMoreButton),r("body").on("click"+a.searchFormWrapperClass,e.hideList)}}(jQuery);