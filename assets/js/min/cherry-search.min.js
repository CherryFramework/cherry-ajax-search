!function(s){"use strict";CherryJsCore.utilites.namespace("cherrySearch"),CherryJsCore.cherrySearch={settings:{searchFormWrapperClass:".cherry-search",searchFormClass:".cherry-search__form",inputClass:".cherry-search__field",submitClass:".cherry-search__submit",listClass:".cherry-search__results-list",itemClass:".cherry-search__results-item",messageHolder:".cherry-search__message",spinner:".cherry-search__spinner",searchHandlerId:"cherry_search_public_action"},init:function(){s("body").on("focus"+this.settings.searchFormWrapperClass,this.settings.inputClass,this.initCherrySearch.bind(this))},initCherrySearch:function(r){var e=s(r.target).closest(this.settings.searchFormWrapperClass);e.cherrySearch(this.settings)}},CherryJsCore.cherrySearch.init(),s.fn.cherrySearch=function(r){var e=this[0];if(e.isInit)return"is init: true";e.isInit=!0;var a=r,t=cherrySearchMessages,c=null,n=wp.template("search-form-results-item"),i=s(a.listClass,e),o=s(a.messageHolder,i),h=s(a.spinner,i);e.inputChangeHandler=function(r){var a=r.target.value;s("ul",i).html(""),e.outputMessage("",""),a?(e.showList(),h.addClass("show"),clearTimeout(c),c=setTimeout(function(){e.searchAjaxInstancer.sendData(a)},450)):e.hideList()},e.successCallback=function(r){var a=r.data,t=a.error,c=a.message,l=a.posts,u=null,C="";if(0===a.post_count||t)e.outputMessage(c,"show");else{o.removeClass("show");for(u in l)C+="more_button"===u?l[u]:n(l[u])}h.removeClass("show"),s("ul",i).html(C)},e.errorCallback=function(){console.log(e.searchAjaxInstancer),h.removeClass("show"),e.outputMessage(t.serverError,"error show")},e.hideList=function(){i.removeClass("show")},e.showList=function(){i.addClass("show")},e.focusHandler=function(){0!==s("ul > li",i).length&&e.showList()},e.outputMessage=function(s,r){o.removeClass("error show").addClass(r).html(s)},e.formClick=function(s){s.stopPropagation()},e.searchAjaxInstancer=new CherryJsCore.CherryAjaxHandler({handlerId:a.searchHandlerId,successCallback:e.successCallback,errorCallback:e.errorCallback}),s(a.inputClass,e).on("input",e.inputChangeHandler).on("focus",e.focusHandler),s(e).on("click"+a.searchFormWrapperClass,e.formClick),s("body").on("click"+a.searchFormWrapperClass,e.hideList)}}(jQuery);